<ng-container *ngIf="data; else loading">
  <div class="space-y-4 sm:space-y-6">
    <div class="bg-slate-800/30 backdrop-blur-sm border border-slate-700/50 rounded-xl overflow-hidden">
      <div class="p-3 sm:p-5 border-b border-slate-700/50">
        <div class="flex items-center gap-3">
          <span class="text-slate-400">ðŸ“‹</span>
          <h2 class="text-base sm:text-lg font-semibold text-white">Procesos Principales</h2>
          <span class="ml-auto text-xs sm:text-sm text-slate-500">{{ data.processes.length || 0 }} procesos</span>
        </div>
      </div>
      <div class="overflow-x-auto">
        <table class="w-full text-sm">
          <thead class="bg-slate-900/50">
            <tr>
              <th class="px-2 sm:px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase tracking-wider">PID</th>
              <th class="px-2 sm:px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase tracking-wider hidden sm:table-cell">Usuario</th>
              <th class="px-2 sm:px-4 py-3 text-right text-xs font-semibold text-slate-400 uppercase tracking-wider">CPU%</th>
              <th class="px-2 sm:px-4 py-3 text-right text-xs font-semibold text-slate-400 uppercase tracking-wider">MEM%</th>
              <th class="px-2 sm:px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase tracking-wider">Comando</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-slate-700/50">
            <tr *ngFor="let process of data.processes | slice:0:15" class="hover:bg-slate-700/20 transition-colors">
              <td class="px-2 sm:px-4 py-3 text-slate-300 font-mono text-xs sm:text-sm">{{ process.pid }}</td>
              <td class="px-2 sm:px-4 py-3 text-slate-300 text-xs sm:text-sm hidden sm:table-cell">{{ process.user }}</td>
              <td class="px-2 sm:px-4 py-3 text-right">
                <span class="font-semibold text-xs sm:text-sm" [ngClass]="parseFloat(process.cpu) > 50 ? 'text-red-400' : 'text-slate-300'">{{ process.cpu }}</span>
              </td>
              <td class="px-2 sm:px-4 py-3 text-right">
                <span class="font-semibold text-xs sm:text-sm" [ngClass]="parseFloat(process.mem) > 10 ? 'text-yellow-400' : 'text-slate-300'">{{ process.mem }}</span>
              </td>
              <td class="px-2 sm:px-4 py-3 text-slate-400 font-mono text-xs truncate max-w-[120px] sm:max-w-md">{{ process.command }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div *ngIf="data.ports && data.ports.length > 0" class="bg-slate-800/30 backdrop-blur-sm border border-slate-700/50 rounded-xl overflow-hidden">
      <div class="p-3 sm:p-5 border-b border-slate-700/50">
        <div class="flex items-center gap-3">
          <span class="text-slate-400">ðŸ“¡</span>
          <h2 class="text-base sm:text-lg font-semibold text-white">Puertos Abiertos</h2>
          <span class="ml-auto text-xs sm:text-sm text-slate-500">{{ data.ports.length || 0 }} puertos</span>
        </div>
      </div>
      <div class="overflow-x-auto">
        <table class="w-full text-sm">
          <thead class="bg-slate-900/50">
            <tr>
              <th class="px-2 sm:px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase tracking-wider">Protocolo</th>
              <th class="px-2 sm:px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase tracking-wider">Puerto</th>
              <th class="px-2 sm:px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase tracking-wider hidden sm:table-cell">DirecciÃ³n</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-slate-700/50">
            <tr *ngFor="let port of data.ports" class="hover:bg-slate-700/20 transition-colors">
              <td class="px-2 sm:px-4 py-3 text-slate-300">
                <span class="inline-flex items-center px-2 sm:px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-500/10 text-blue-400 border border-blue-500/20">{{ port.protocol }}</span>
              </td>
              <td class="px-2 sm:px-4 py-3 text-slate-300 font-mono font-semibold text-xs sm:text-sm">{{ port.port }}</td>
              <td class="px-2 sm:px-4 py-3 text-slate-400 font-mono text-xs hidden sm:table-cell">{{ port.address }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</ng-container>
<ng-template #loading>
  <div class="bg-slate-800/50 border border-slate-700/50 rounded-xl p-6 animate-pulse h-64"></div>
</ng-template>
